<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>timeserie sonification</title>
        <!-- tone.js for sounds -->
        <script src="js/Tone.min.js"></script>
        <!-- jquery for convenience -->
        <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
        <!-- my code -->
        <script src="js/timeseries.js"></script>
        <!-- plotly for graphs -->
        <script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script>

        <style>
            #canvas{
                width: 100%;
                height: 520px;
                background-color: black;
            }
        </style>

    </head>
    <body>
        <h3>timeseries data sonification</h3>
        <p>
            for each year a ticking is played.
            using granular synthesis on sound derived on the timeseries itself as a sample to drive each sonification would be cool.
        </p>
        <canvas id="canvas"></canvas>

        <button class=".btn" id="play-btn" onclick="play()" disabled="true">play</button>
        <button class=".btn" id="stop-btn" onclick="stop()">stop</button>
        <div id="graphs"></div>
        <div id="checkboxes">

        </div>
    </body>
    <script>

        function getMousePos(canvas, evt) {
            var rect = canvas.getBoundingClientRect();
            return {
              x: evt.clientX - rect.left,
              y: evt.clientY - rect.top
            }
        }

        var canvas = document.getElementById('canvas');
        var context = canvas.getContext('2d');

        canvas.addEventListener('mousemove', function(evt) {
            var mousePos = getMousePos(canvas, evt);
            var timePos = Math.floor(mousePos.x / canvas.offsetWidth * 999);
            var trackPos = Math.floor(mousePos.y / canvas.offsetHeight * 13)
            if(year < 0) year = 0;
            year = timePos;
            /*if (oscillators[trackPos] != null){
                console.log(trackPos + " " + year);
                oscillators[trackPos].osc.mute = false;
            }*/

            //console.log(year + " - " + + trackPos) ;
        }, false);

    </script>
</html>
